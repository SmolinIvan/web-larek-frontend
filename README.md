# Проектная работа "Веб-ларек" (сдача документации)

(К сожалению, я запутался в задании и чек-листе к проектной работы 8-ого спринта, и начал реализовывать функционал. Прощу считать эту итерацию как попытку сдать документацию, если это возможно, спасибо)
Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание проекта

Проект "Веб-ларёк" реализует пример типового интернет-магазина. Пользователь может ознакомиться с каталогом товаров, добавлять и убирать товары из корзины, произвести оплату продуктов, лежащих в корзине. Проект реализован на TypeScript с использованием MVP-паттерна. Для получения данных используется API


## Описание интерфейса

Интерфейс можно условно разделить на 3 процесса:
1. Просмотр каталога товаров на странице (Page) и выбор продукта (ProductPreview). Здесь можно добавить в корзину товар, или убрать его от туда
2. Просмотр корзины (BasketView). Из корзины товары можно только удалить или перейти к оплате товаров
3. Оформление заказа (PayOptionsView, UserDataView, SuccessView)

Просмотр товаров, корзины и оформление заказа происходит внутри модального окна: содержимое форм, корзины и карточек отображается внутри одного и того же модального окна

## Структура проекта

.
├── src/
│   ├── common.blocks/ [Стили компонент верстки]
│   ├── components/ [Реализация]
│   │   ├── base/ [Базовый код]
│   │   ├── model/ [Модели данных]
│   │   ├── view/ [Отображения]
│   ├── pages/
│   │   ├── index.html [Основная страница и шаблоны компонент]
│   ├── types/ [Типизация]
│   │   ├── index.ts [Модели данных и отображения]
│   ├── utils/
│   │   ├── constants.ts [Константы для проекта]
│   │   ├── utils.ts [Утилиты для работы с DOM]
├── api.yaml [Спецификация API]

## Архитектура проекта (MVP)

Реализовано 3 модели данных: CatalogModel, BasketModel, и OrderModel (`src/components/model/СatalogModel.ts`, `src/components/model/BasketModel.ts`, `src/components/model/OrderModel.ts`). После получения ответа от сервера, данные о продуктах хранятся в CatalogModel, при выборе определенных продуктов соответствущие данные добавляются в BasketModel (или удаляются от туда соответствующим методом). После выбора продуктов на этапе оформления заказа данные о продуктах из корзины добавляются в OrderModel, туда же добавляются данные о плательщике. После оплаты CatalogModel очищается. Все изменения данных происходят через методы соответствующих моделей, а они в свою очередь уведомляют об изменениях через метод настроек `on(items: changed)` и `on(basket: changed)`.

Экземпляры моделей, экземпляр модального окна, экземпляр основной страницы и классы отвечающие за отображение элементов на странице передаются в Презентер (`src/components/model/Presenter.ts`). Презентер обрабатывает действия пользователя, отображает актуальное состояние страницы в зависимости от моделей и обновляет состояния моделей через их методы
которые по факту являются обработчиками пользовательских действий и обновляют состояние модели через ее методы. 

Пример взаимодействия:
  1. С сервера приходят данные и сохраняются в CatalogModel
  2. При сохранении данных в модель вызывается событие отрисовки карточек товаров
  3. При клике на карточку срабатывает событие открывающее модальное окно, в модальное окно отрисовываются данные выбранного товара (ProductPreview)
  4. При добавлении товара в корзину данные о товаре добавлю.тся в BasketModel, содержимое корзины отрисовывается (BasketPreview)
  5. При клике на "Оформить" вызывается событие открывающее модальное окно с содержимым формы для выбора способа оплаты
  6. При заполнении формы в OrderModel сохраняется выбранные данных, которые хранились в BasketModel и  данные веденные с формы. Срабатывает событие вызывающее открытие  модального окна с способом оплаты
  7. При сохранении данных с этой формы в OrderModel добавляются данные введенный в форме и отправляется запрос на сервер с данными хранящимися в OrderModel. BasketModel очищается, BasketView очищается, OrderModel очищается, отображается модального окно об успешной операции

### Отображения

